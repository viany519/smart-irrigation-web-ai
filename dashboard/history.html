<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Greenpulse • History</title>
  <link rel="stylesheet" href="./styles.css" />

  <style>
    /* ===============================
       FIX 1: TAB BISA DIKLIK
       =============================== */
    .pill-tabs,
    .pill-tabs * {
      pointer-events: auto;
    }
    .pill-tabs {
      position: relative;
      z-index: 999;
    }
    .grid,
    .card,
    .chart-wrap,
    .chart-canvas {
      position: relative;
      z-index: 1;
    }

    /* ===============================
       STYLE ASLI (TIDAK DIUBAH)
       =============================== */
    .page-head { display:flex; align-items:flex-end; justify-content:space-between; gap:16px; margin-bottom:14px; }
    .page-title { font-size:44px; line-height:1.1; margin:0; }
    .page-sub { margin:6px 0 0; color:#6b7280; }

    .toolbar { display:flex; gap:10px; flex-wrap:wrap; align-items:center; }
    .pill-tabs-inner { display:flex; gap:10px; background:rgba(255,255,255,.65); border:1px solid rgba(0,0,0,.08); padding:8px; border-radius:999px; box-shadow:0 12px 30px rgba(0,0,0,.06); }
    .pill { border:1px solid rgba(0,0,0,.10); background:#fff; padding:10px 14px; border-radius:999px; cursor:pointer; font-weight:600; }
    .pill.active { background:#0f5a45; color:#fff; border-color:#0f5a45; }
    .select { border:1px solid rgba(0,0,0,.10); background:#fff; padding:10px 12px; border-radius:999px; }
    .btn { border:1px solid rgba(0,0,0,.12); background:#fff; padding:10px 14px; border-radius:999px; cursor:pointer; font-weight:700; }
    .btn.primary { background:#0f5a45; color:#fff; border-color:#0f5a45; }

    /* === HISTORY GRID FINAL === */
body[data-page="history"] .grid {
  display: grid;
  grid-template-columns: 1fr;   /* SATU KOLOM */
  gap: 16px;
  margin-top: 8px;
}

    /* === FIX CARD HISTORY === */
body[data-page="history"] .card {
  overflow: visible;   /* BIARKAN ISI TABLE KELUAR */
}
    .card.pad { padding:18px; }

    .chart-wrap { padding:18px 18px 8px; }
    .chart-title { font-size:26px; margin:0 0 4px; }
    .chart-sub { margin:0 0 14px; color:#0f5a45; font-weight:600; font-size:14px; }
    .chart-canvas { width:100%; height:280px; display:block; }

    .table-wrap { padding:0 18px 18px; }
    /* === FIX TABLE === */
body[data-page="history"] table {
  overflow: visible;
  table-layout: fixed;
}
    thead th {
      background:#0f5a45; color:#fff; text-align:left; font-size:13px;
      padding:12px 14px; position:sticky; top:0;
    }
    tbody td { padding:12px 14px; border-bottom:1px solid rgba(0,0,0,.06); font-size:14px; color:#374151; }
    tbody tr:last-child td { border-bottom:none; }
    .muted { color:#6b7280; font-size:13px; }
    .right { text-align:right; }
    .empty { padding:18px; color:#6b7280; }

    @media (max-width: 980px) {
      .grid { grid-template-columns: 1fr; }
      .page-title { font-size:36px; }
    }

    /* ===============================
   HISTORY TABLE FINAL POLISH
=============================== */

/* BIARKAN TEKS WRAP NORMAL */
body[data-page="history"] table th,
body[data-page="history"] table td {
  white-space: normal;
}

/* RAPIIN KOLOM TIME */
body[data-page="history"] table th:first-child,
body[data-page="history"] table td:first-child {
  width: 200px;
  font-variant-numeric: tabular-nums;
}

/* KOLOM CHANGE JADI CENTER & COMPACT */
body[data-page="history"] table th:nth-child(3),
body[data-page="history"] table td:nth-child(3) {
  width: 140px;
  text-align: center;
  font-weight: 700;
}

/* KOLOM NOTES JANGAN MAKAN TEMPAT */
body[data-page="history"] table th:nth-child(4),
body[data-page="history"] table td:nth-child(4) {
  width: 100px;
  text-align: center;
  color: #9ca3af;
}

/* STATUS BADGE */
.badge {
  display: inline-block;
  padding: 4px 10px;
  border-radius: 999px;
  font-size: 12px;
  font-weight: 700;
}

.badge.need {
  background: #fee2e2;
  color: #991b1b;
}

.badge.ok {
  background: #dcfce7;
  color: #065f46;
}

  </style>
</head>

<body class="bg-grid-light" data-page="history">
<div class="shell">

  <!-- ================= SIDEBAR (SATU-SATUNYA BAGIAN YANG DIUBAH) ================= -->
  <aside class="sidebar">
    <div class="brand">
      <img src="./assets/logo.svg" alt="logo" />
      greenpulse
    </div>

    <div class="nav-title">MENU</div>
    <nav class="nav">
      <a href="./dashboard.html"><img class="icon" src="./assets/icons/dashboard.svg" />Dashboard</a>
      <a href="./monitoring.html"><img class="icon" src="./assets/icons/monitoring.svg" />Monitoring</a>
      <a href="./control.html"><img class="icon" src="./assets/icons/control.svg" />Control</a>
      <a href="./history.html" class="active"><img class="icon" src="./assets/icons/history.svg" />History</a>
      <a href="./settings.html"><img class="icon" src="./assets/icons/settings.svg" />Settings</a>
    </nav>

    <div class="nav-title" style="margin-top:18px">GENERAL</div>
    <nav class="nav">
      <a href="./profile.html"><img class="icon" src="./assets/icons/profile.svg" />Profile</a>
      <a href="./help.html"><img class="icon" src="./assets/icons/help.svg" />Help</a>
      <a href="#" data-logout>
        <img class="icon" src="./assets/icons/logout.svg" />
        Logout
    </a>

    </nav>
  </aside>
  <!-- ================= /SIDEBAR ================= -->

  <!-- ================= MAIN (TIDAK DIUBAH) ================= -->
  <div class="main">

    <!-- TOPBAR -->
    <div class="topbar">
          <input class="search" placeholder="Search" />
          <a class="icon-btn" href="./notification.html" title="Notifications">
            <img
            src="./assets/icons/notification.png"
            alt="Notifications"
            class="notif-icon"
            />
          </a>

      <div class="profile">
        <img data-user-photo src="./assets/avatar-default.png" />
        <div>
          <div class="name" data-user-name>User</div>
          <div class="email" data-user-email>user@email.com</div>
        </div>
      </div>
    </div>

    <!-- CONTENT -->
    <div class="content">
      <div class="page-head">
        <div>
          <h1 class="page-title">History</h1>
          <p class="page-sub">Riwayat input sensor (manual) & hasil prediksi AI untuk tiap tanaman.</p>
        </div>

        <div class="toolbar">
          <button class="btn" onclick="location.href='./pickplant.html'">Pick plant</button>
         <button
  class="btn primary"
  onclick="location.href='./monitoring.html'">
  Go Monitoring
</button>

        </div>
      </div>

      <div class="pill-tabs">
        <div class="pill-tabs-inner">
          <button class="pill active" data-metric="temp">Soil Temperature</button>
          <button class="pill" data-metric="moist">Soil Moisture</button>
          <button class="pill" data-metric="hum">Air Humidity</button>
        </div>
      </div>
<!-- =========================
     HISTORY SECTION (FIXED)
========================= -->

<!-- GRID UTAMA: HANYA 1 KOLOM -->
<div class="grid">

  <!-- =========================
       CARD UTAMA: CHART + TABLE
  ========================= -->
  <div class="card">

    <div class="chart-wrap">
      <h2 class="chart-title" id="chartTitle">Soil Temperature</h2>
      <div class="chart-sub" id="chartSub">Chart</div>
      <canvas
        id="chartCanvas"
        class="chart-canvas"
        width="1100"
        height="420">
      </canvas>
    </div>

    <div class="table-wrap">
      <table>
       <thead>
  <tr>
    <th style="width:200px">Time</th>
    <th id="thValue">Soil Temperature</th>
    <th style="width:180px;text-align:center">Kondisi Tanaman</th>
  </tr>
</thead>

        <tbody id="tbody"></tbody>
      </table>

      <div class="empty" id="emptyState" style="display:none">
        Belum ada data. Masuk ke <b>Monitoring</b> untuk input data manual dulu.
      </div>
    </div>

  </div>
</div>

<!-- JARAK ANTAR CARD -->
<div style="height:20px"></div>

<!-- =========================
     CARD BAWAH: RINGKASAN
========================= -->
<div class="card pad">

  <h3 style="margin:0 0 10px;font-size:18px">Ringkasan</h3>
  <div class="muted" id="sumPlant">Plant: —</div>
  <div class="muted" id="sumCount">Records: —</div>
  <div class="muted" id="sumLast">Last update: —</div>

  <div style="height:14px"></div>

  <!-- AI DECISION -->
  <div class="card pad"
       style="box-shadow:none;border-radius:18px;border:1px solid rgba(0,0,0,.08)">
    <div style="font-weight:800;margin-bottom:6px">
      AI Decision (last)
    </div>
    <div style="display:flex;gap:10px;align-items:center;flex-wrap:wrap">
      <div class="muted">Need water:</div>
      <div id="sumNeed" style="font-weight:900">—</div>
      <div class="muted">Prob:</div>
      <div id="sumProb" style="font-weight:900">—</div>
    </div>
  </div>

  <div style="height:14px"></div>

  <!-- CATATAN -->
  <div class="card pad"
       style="box-shadow:none;border-radius:18px;border:1px solid rgba(0,0,0,.08)">
    <div style="font-weight:800;margin-bottom:8px">INFORMATION</div>
    <div class="muted">
      Riwayat ini menunjukkan hasil analisis AI terhadap kondisi 
      tanaman berdasarkan data sensor. 
      Input saat ini masih bersifat simulasi, 
      namun sistem dirancang agar dapat terhubung langsung dengan perangkat sensor di masa mendatang.
    </div>
  </div>

</div>


<script src="./app.js"></script>


</body>
</html>




